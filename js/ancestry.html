
<script src="ancestry.js"></script>
<script>
  var ancestry = JSON.parse(ANCESTRY_FILE)
  console.log(ancestry.length)

  // 
  function filter(ary, test) {
    var passed = []
    for(var i = 0; i < ary.length; i++) {
      if (test(ary[i], i, ary)) {
        passed.push(ary[i])
      }
    }
    return passed
  }


  function map(ary, mapper) {
    var result = []
    for(var i = 0; i < ary.length; i++) {
      result.push(mapper(ary[i], i, ary))
    }
    return result
  }

  function keyBy2(ary, key) {
    var result = {}
    ary.forEach(item => {
      reslut[item[key]] = item
    })
    return result
  }

  function keyBy(ary, key) {
    return ary.reduce((result, item) => {
      result[item[key]] = item
      return result
    }, {})
  }

  var byName = keyBy(ancestry, 'name')

  var name = 'Philibert Haverbeke'
  var target = 'Pauwels van Haverbeke'

  var start = byName[name]
  var current = start
  var count = 0

  while (current.name !== target) {
    count++
    current = byName[current.father]
  }

  console.log(count)

  /**
   * 计算person与PvH的共享基因数量
   */
  function sharedDNAWithPvH(name) {
    var person = byName[name]
    if (!person) {
      return 0
    }
    if (name == 'Pauwels van Haverbeke') {
      return 1
    }
    return (
      sharedDNAWithPvH(person.father)
      +
      sharedDNAWithPvH(person.mother)
    ) / 2
  }


</script>