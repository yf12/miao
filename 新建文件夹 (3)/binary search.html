<script type="x">   //维基百科上二分法的写法
    var arr = [1, 3, 5, 7, 9, 10, 11, 12, 14, 15, 19, 20];
    function binarySearch (arr, val) {
        debugger
        var low = 0,
            high = arr.length - 1;
        while (low <= high) {
            var mid = parseInt( (low + high) / 2 );
            if (val == arr[mid]) {
                return mid;
            }else if (val > arr[mid]) {
                low = mid + 1;
            }else if (val < arr[mid]) {
                high = mid - 1;
            }
        }
        return -1;
    };  
    console.log( binarySearch(arr, 3) )
</script>

<script type="x">    //完全平方数  二分法
    var isPerfectSquare = function(num) {
        var left = 0,right = num
        while (left <= right) {
            var mid = Math.floor((left + right) / 2)
            if(mid * mid == num) return true
            else if(mid * mid < num) {
                left = mid + 1
            }
            else {
                right = mid - 1
            }
        }
        return false
    } 
    var n = +prompt('请输入n')
    console.log(isPerfectSquare(n))
</script>
    
<script type="x">   //二分法，有点冗余但是好想点
    var isPerfectSquare = function(num) {
        var min = 0,max = num
        if(num === 1) return true
        else {
            while(max - min > 1) {
                var mid = Math.floor((max + min) / 2)
                if(mid * mid === num) return true
                else if (mid * mid > num) {
                    max = mid
                }
                else {
                    min = mid
                }
            }
            return false
        }
    }
    var n = +prompt('请输入n')
    console.log(isPerfectSquare(n))
</script>

<script type="x">  //二分法找target  704 
    var search = function(nums, target) {
        var left = 0,right = nums.length
        while(left < right) {
            var mid = Math.floor((left + right) / 2)
            if(nums[mid] === target) return mid
            else if(nums[mid] < target) {
                left = mid + 1
            }
            else {
                right = mid
            }
        }
        return -1
    }
</script>

<script type = "text">  //二分法找数列中最小数字 153
    var findMin = function(nums) {
        var n = nums.length
        if(n === 1) return nums[0]
        var left = 0,right = n
        while(left < right) {
            var mid = Math.floor((left + right) / 2)
            if(nums[mid] < nums[left]) {
                if(nums[mid] < nums[mid - 1]) {
                    return nums[mid]
                }
                else {
                    right = mid + 1
                }
            }
            else {
                if(nums[mid] > nums[mid + 1]) {
                    return nums[mid + 1]
                }
                else {
                    if(nums[0] < nums[n - 1]) {
                        return nums[0]
                    }
                    else {
                        left = mid
                    }
                }
            } 
        }
    }
    console.log(findMin([15,16,17,19,22,33,44,55,1,2,4]))
</script>

<script type = "text">  //二分法找target  33
    var search = function(nums, target) {
        var n = nums.length
        if(n === 1) {
            if(nums[0] == target) return 0
            else return -1
        }
        var left = 0,right = n
        while(left < right) {
            var mid = Math.floor((left + right) / 2)
            if(nums[mid] === target) {
                return mid
            }
            else if(nums[mid] < target) {
                if (nums[mid] > nums[left]) {
                    left = mid
                }
                else {
                    if(target >= nums[left]) {
                        right = mid
                    }
                    else {
                        left = mid
                    }
                }
            }
            else {
                if(nums[mid] > nums[right - 1]) {
                    if(target >= nums[left]) {
                        right = mid
                    }
                    else {
                        left = mid
                    }
                }
                else {
                    right = mid
                }
            }  
        }
        return -1
    }
    search([4,5,6,7,0,1,2],0)
</script>

<script type = "text">  //上题 同桌的
    var search = function (nums, target) {
        let head = 0
        let tail = nums.length - 1
        let mid = 0
        let midValue = 0
    
        while (head <= tail) {
        mid = ~~((head + tail) / 2)
        midValue = nums[mid]
        if (midValue === target) return mid
    
        // mid 截断前区间
        if (midValue >= nums[head]) {
            if (target < nums[head]) {
            head = mid + 1 // target 位于截断后
            } else {
            target > midValue ? head = mid + 1 : tail = mid - 1 // target 位于截断前, 判断与 midValue 的关系
            }
        } else {
            // mid 位于截断后 区间
            if (target > nums[tail]) {
            tail = mid - 1 // target 位于 截断前
            } else {
            target > midValue ? head = mid + 1 : tail = mid // target 位于截断后, 判断与 midValue 的关系
            }
        }
        }
        return -1
    }
</script>

<script type = "text">  //leetcode上其他人的 
    var search = function(nums, target) {
        let l = 0;
        let r = nums.length-1;
        let mid;
        while(l < r) {
            mid = Math.trunc((l+r)/2);
            if(nums[mid] > nums[r]) l = mid+1;
            else r = mid; 
        }
        if(target <= nums[nums.length - 1]) [l, r] = [l, nums.length-1];
        else [l, r] = [0, l-1];
        while(l < r) {
            mid = Math.trunc((l+r)/2);
            if(nums[mid] === target) return mid;
            else if(nums[mid] > target) r = mid;
            else l = mid+1; 
        }
        return nums[l] === target ? l : -1;
    }
</script>

